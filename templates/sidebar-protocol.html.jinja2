<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ frontmatter.title }} - CHPT</title>
    <link rel="stylesheet" href="{{ file_meta.path_to_root }}/resources/css/style.css">
</head>
<body>
    <nav class="navbar">
        <a href="{{ file_meta.path_to_root }}/index.html">Home</a>
        <a href="{{ file_meta.path_to_root }}/protocols/index.html">Protocols</a>
        <a href="{{ file_meta.path_to_root }}/contacts.html">Contacts/Links</a>
    </nav>

    <div class="content-with-sidebar">
        <aside class="sidebar">
            <h3>Protocols</h3>
            {% for path, doc in docs.items() | sort %}
            {% if path.startswith('protocols/') and path.endswith('/index') and doc.frontmatter.protocol_id %}
            <a href="{{ file_meta.path_to_root }}/{{ doc.file_meta.path_html }}"{% if frontmatter.protocol_id == doc.frontmatter.protocol_id %} class="active"{% endif %}>{{ doc.frontmatter.protocol_id }} - {{ doc.frontmatter.short_title }}</a>
            {% endif %}
            {% endfor %}

            {% if frontmatter.protocol_id %}
            <h3 class="sidebar-subheading">{{ frontmatter.protocol_id }} Pages</h3>
            <a href="./index.html"{% if file_meta.path_html.endswith('/index.html') %} class="active"{% endif %}>Elements</a>
            <a href="./results.html"{% if file_meta.path_html.endswith('/results.html') %} class="active"{% endif %}>Results</a>
            <a href="./analyses.html"{% if file_meta.path_html.endswith('/analyses.html') %} class="active"{% endif %}>Analyses</a>
            {% endif %}
        </aside>

        <main class="main-content">
            <h1>{{ frontmatter.title }}</h1>

            {% if frontmatter.badge %}
            <span class="badge badge-{{ frontmatter.badge | lower }}">{{ frontmatter.badge }}</span>
            {% endif %}

            {% if frontmatter.description %}
            <div class="protocol-header">
            <div class="protocol-description">
            <p>{{ frontmatter.description }}</p>
            <p><strong>Status:</strong> {{ frontmatter.badge }}</p>
            </div>
            <div class="protocol-thumbnail">
            <img src="{{ file_meta.path_to_root }}/resources/data/hydrology-logo-no-text.png" alt="{{ frontmatter.protocol_id }} Thumbnail">
            </div>
            </div>
            {% endif %}

            {% if frontmatter.elements %}
            <h2>Protocol Elements</h2>

            <table>
            <tr><th>Element</th><th>Description</th></tr>
            <tr><td><strong>Focus/Objective</strong></td><td>{{ frontmatter.elements.focus }}</td></tr>
            <tr><td><strong>Observation(s)</strong></td><td>{{ frontmatter.elements.observations }}</td></tr>
            <tr><td><strong>Reference capabilities (baselines)</strong></td><td>{{ frontmatter.elements.baselines }}</td></tr>
            <tr><td><strong>Experimental design</strong></td><td>{{ frontmatter.elements.design }}</td></tr>
            <tr><td><strong>Metrics of performance</strong></td><td>{{ frontmatter.elements.metrics }}</td></tr>
            {% if frontmatter.elements.considerations %}<tr><td><strong>Other considerations</strong></td><td>{{ frontmatter.elements.considerations }}</td></tr>{% endif %}
            {% if frontmatter.elements.references %}<tr><td><strong>Key references</strong></td><td>{{ frontmatter.elements.references }}</td></tr>{% endif %}
            {% if frontmatter.elements.contacts %}<tr><td><strong>Contact(s)</strong></td><td>{{ frontmatter.elements.contacts }}</td></tr>{% endif %}
            {% if frontmatter.elements.metadata %}<tr><td><strong>Metadata</strong></td><td>{{ frontmatter.elements.metadata }}</td></tr>{% endif %}
            </table>
            {% endif %}

            {{ __content__ | safe }}

            {% if frontmatter.analyses %}
            {% for analysis in frontmatter.analyses %}
            <div class="analysis-row">
            <div class="analysis-text">
            <h3>{{ analysis.title }}</h3>
            <p>{{ analysis.description }}</p>
            </div>
            <div class="analysis-image">
            <img src="{{ file_meta.path_to_root }}/{{ analysis.image }}" alt="{{ analysis.alt | default(analysis.title) }}">
            </div>
            </div>
            {% endfor %}
            {% endif %}

            {% if frontmatter.cards %}
            <h2>Protocol Elements</h2>
            {% for card in frontmatter.cards %}
            <div class="card">
                <h3>{{ card.title }}</h3>
                {{ card.content | safe }}
            </div>
            {% endfor %}
            {% endif %}
        </main>
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="https://ciroh.ua.edu/">CIROH</a>
            <a href="https://hydrology.mines.edu/">Mines Hydrology</a>
            <a href="https://rtiinternational.github.io/teehr/">TEEHR</a>
        </div>
    </footer>
</body>
</html>
